<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reports & Statements | Infinity Mutual Funds</title>
    <meta name="description" content="Generate detailed investment reports, statements, and analytics">
    <meta name="author" content="Infinity Financial Services">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Date Range Picker -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.29.4/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/components.css">
    
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #10b981 0%, #059669 100%);
            --warning-gradient: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            --danger-gradient: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            --info-gradient: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            --purple-gradient: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --shadow-xl: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(rgba(10, 15, 46, 0.95), rgba(26, 31, 78, 0.95)), url('assets/images/dashboard/hero-bg.png');
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .reports-container {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: 100vh;
        }
        
        /* Sidebar Styles */
        .sidebar {
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            padding: 30px 20px;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
        }
        
        .sidebar-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logo-image {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            object-fit: contain;
        }
        
        .brand-name {
            color: white;
            font-size: 18px;
            font-weight: 600;
        }
        
        .user-profile {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .user-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin-bottom: 15px;
            border: 3px solid #667eea;
            object-fit: cover;
        }
        
        .user-name {
            color: white;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .user-email {
            color: #cbd5e1;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
        
        .user-plan {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .nav-menu {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            color: #cbd5e1;
            text-decoration: none;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        
        .nav-link:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .nav-link.active {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(118, 75, 162, 0.2) 100%);
            color: white;
            border-left: 3px solid #667eea;
        }
        
        .nav-link i {
            width: 20px;
            text-align: center;
        }
        
        .sidebar-footer {
            margin-top: auto;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .logout-btn {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            color: #ef4444;
            text-decoration: none;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        
        .logout-btn:hover {
            background: rgba(239, 68, 68, 0.1);
        }
        
        /* Main Content Styles */
        .main-content {
            padding: 30px;
            overflow-y: auto;
        }
        
        .main-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .welcome-message h1 {
            color: white;
            margin-bottom: 10px;
        }
        
        .welcome-message p {
            color: #cbd5e1;
        }
        
        .header-actions {
            display: flex;
            gap: 15px;
        }
        
        .btn {
            padding: 12px 25px;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.4);
        }
        
        /* Date Range Picker */
        .date-range-container {
            margin-bottom: 30px;
        }
        
        .date-range-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .date-range-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .date-range-header h3 {
            color: white;
        }
        
        .date-range-input {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        #reportDateRange {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: white;
            padding: 12px 20px;
            cursor: pointer;
            width: 300px;
        }
        
        /* Report Types Grid */
        .report-types {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .report-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .report-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.15);
        }
        
        .report-card.premium {
            border: 2px solid #f59e0b;
            position: relative;
            overflow: hidden;
        }
        
        .report-card.premium::before {
            content: 'PREMIUM';
            position: absolute;
            top: 10px;
            right: -25px;
            background: #f59e0b;
            color: black;
            padding: 3px 30px;
            font-size: 0.7rem;
            font-weight: 700;
            transform: rotate(45deg);
        }
        
        .report-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 20px;
        }
        
        .report-card.portfolio .report-icon {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(118, 75, 162, 0.2) 100%);
            color: #667eea;
        }
        
        .report-card.tax .report-icon {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.2) 0%, rgba(220, 38, 38, 0.2) 100%);
            color: #ef4444;
        }
        
        .report-card.performance .report-icon {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(5, 150, 105, 0.2) 100%);
            color: #10b981;
        }
        
        .report-card.transactions .report-icon {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(29, 78, 216, 0.2) 100%);
            color: #3b82f6;
        }
        
        .report-card.analytics .report-icon {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.2) 0%, rgba(147, 51, 234, 0.2) 100%);
            color: #a855f7;
        }
        
        .report-card.compliance .report-icon {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.2) 0%, rgba(217, 119, 6, 0.2) 100%);
            color: #f59e0b;
        }
        
        .report-card h3 {
            color: white;
            margin-bottom: 10px;
        }
        
        .report-card p {
            color: #cbd5e1;
            font-size: 0.9rem;
            margin-bottom: 20px;
            min-height: 40px;
        }
        
        .report-features {
            margin-top: 15px;
        }
        
        .report-feature {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #cbd5e1;
            font-size: 0.85rem;
            margin-bottom: 8px;
        }
        
        .report-feature i {
            color: #10b981;
            width: 16px;
        }
        
        .report-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .report-btn {
            flex: 1;
            padding: 10px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .report-btn.primary {
            background: rgba(102, 126, 234, 0.2);
            color: #667eea;
            border: 1px solid rgba(102, 126, 234, 0.3);
        }
        
        .report-btn.primary:hover {
            background: rgba(102, 126, 234, 0.3);
        }
        
        .report-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .report-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* Generated Reports Section */
        .generated-reports {
            margin-bottom: 30px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .section-header h2 {
            color: white;
        }
        
        .reports-list {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .report-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: background 0.3s ease;
        }
        
        .report-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .report-item:last-child {
            border-bottom: none;
        }
        
        .report-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .report-icon-small {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .report-details h4 {
            color: white;
            margin-bottom: 5px;
        }
        
        .report-details p {
            color: #cbd5e1;
            font-size: 0.85rem;
        }
        
        .report-size {
            color: #94a3b8;
            font-size: 0.8rem;
        }
        
        .report-actions-small {
            display: flex;
            gap: 10px;
        }
        
        .action-btn {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .action-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .action-btn.download {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }
        
        .action-btn.download:hover {
            background: rgba(16, 185, 129, 0.3);
        }
        
        .action-btn.delete {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }
        
        .action-btn.delete:hover {
            background: rgba(239, 68, 68, 0.3);
        }
        
        /* Report Preview Section */
        .report-preview-section {
            margin-bottom: 30px;
        }
        
        .preview-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .preview-header h3 {
            color: white;
        }
        
        .preview-actions {
            display: flex;
            gap: 15px;
        }
        
        .preview-content {
            background: rgba(15, 23, 42, 0.8);
            border-radius: 10px;
            padding: 30px;
            min-height: 500px;
            color: white;
        }
        
        .report-title {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .report-title h2 {
            color: white;
            margin-bottom: 10px;
        }
        
        .report-meta {
            display: flex;
            justify-content: center;
            gap: 30px;
            color: #cbd5e1;
            font-size: 0.9rem;
            margin-bottom: 40px;
        }
        
        .report-section {
            margin-bottom: 40px;
        }
        
        .report-section h4 {
            color: white;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .summary-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .summary-label {
            color: #cbd5e1;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .summary-value {
            color: white;
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .summary-value.positive {
            color: #10b981;
        }
        
        .summary-value.negative {
            color: #ef4444;
        }
        
        /* Footer */
        .reports-footer {
            text-align: center;
            padding: 20px;
            color: #cbd5e1;
            font-size: 0.85rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 40px;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 40px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .modal-header h2 {
            color: white;
        }
        
        .close-modal {
            background: none;
            border: none;
            color: #94a3b8;
            font-size: 24px;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .close-modal:hover {
            color: white;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #e2e8f0;
            font-size: 14px;
            font-weight: 500;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 14px 16px;
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: white;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .form-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-checkbox input {
            width: auto;
        }
        
        .form-checkbox label {
            margin-bottom: 0;
            cursor: pointer;
        }
        
        .modal-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 10000;
            animation: slideIn 0.5s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            display: none;
        }
        
        .notification.show {
            display: flex;
        }
        
        /* Mobile Responsive */
        @media (max-width: 1024px) {
            .reports-container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: fixed;
                left: -280px;
                top: 0;
                z-index: 1000;
                transition: left 0.3s ease;
            }
            
            .sidebar.active {
                left: 0;
            }
            
            .mobile-menu-toggle {
                display: block;
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 1001;
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.2);
                color: white;
                width: 50px;
                height: 50px;
                border-radius: 10px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.5rem;
                cursor: pointer;
            }
            
            .report-types {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            .main-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .header-actions {
                width: 100%;
                justify-content: space-between;
            }
            
            .date-range-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            #reportDateRange {
                width: 100%;
            }
            
            .report-types {
                grid-template-columns: 1fr;
            }
            
            .report-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 20px;
            }
            
            .report-actions-small {
                align-self: flex-end;
            }
            
            .preview-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .preview-actions {
                width: 100%;
                justify-content: space-between;
            }
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* Loading animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #667eea;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Print Styles */
        @media print {
            .sidebar, .main-header, .date-range-container, 
            .report-actions, .report-actions-small, .preview-actions,
            .footer, .mobile-menu-toggle, .modal, .notification {
                display: none !important;
            }
            
            .main-content {
                padding: 0;
            }
            
            .preview-content {
                background: white !important;
                color: black !important;
                padding: 20px;
            }
            
            .preview-content h2, .preview-content h4 {
                color: black !important;
            }
            
            .preview-content .summary-label {
                color: #666 !important;
            }
            
            .preview-content .summary-value {
                color: black !important;
            }
            
            body {
                background: white !important;
            }
        }
    </style>
</head>
<body>
    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationMessage">Action completed successfully!</span>
    </div>
    
    <!-- Mobile Menu Toggle -->
    <div class="mobile-menu-toggle" id="mobileMenuToggle">
        <i class="fas fa-bars"></i>
    </div>
    
    <!-- Generate Report Modal -->
    <div class="modal" id="generateReportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Generate Report</h2>
                <button class="close-modal" id="closeGenerateModal">&times;</button>
            </div>
            <form id="generateReportForm">
                <div class="form-group">
                    <label for="reportType">Report Type</label>
                    <select id="reportType" required>
                        <option value="">Select report type</option>
                        <option value="portfolio">Portfolio Statement</option>
                        <option value="tax">Tax Report</option>
                        <option value="performance">Performance Report</option>
                        <option value="transactions">Transaction History</option>
                        <option value="analytics">Portfolio Analytics</option>
                        <option value="compliance">Compliance Report</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="reportFormat">Format</label>
                    <select id="reportFormat" required>
                        <option value="pdf">PDF Document</option>
                        <option value="excel">Excel Spreadsheet</option>
                        <option value="csv">CSV File</option>
                        <option value="html">HTML Report</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="reportDateRangeModal">Date Range</label>
                    <input type="text" id="reportDateRangeModal" class="date-range-input" required>
                </div>
                
                <div class="form-group">
                    <label>Include Sections</label>
                    <div class="form-checkbox">
                        <input type="checkbox" id="includeSummary" checked>
                        <label for="includeSummary">Executive Summary</label>
                    </div>
                    <div class="form-checkbox">
                        <input type="checkbox" id="includeHoldings" checked>
                        <label for="includeHoldings">Portfolio Holdings</label>
                    </div>
                    <div class="form-checkbox">
                        <input type="checkbox" id="includePerformance" checked>
                        <label for="includePerformance">Performance Metrics</label>
                    </div>
                    <div class="form-checkbox">
                        <input type="checkbox" id="includeTransactions" checked>
                        <label for="includeTransactions">Transaction History</label>
                    </div>
                    <div class="form-checkbox">
                        <input type="checkbox" id="includeTax" checked>
                        <label for="includeTax">Tax Information</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="reportNotes">Notes (Optional)</label>
                    <textarea id="reportNotes" rows="3" placeholder="Add any notes for this report..."></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelGenerateReport">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="submitGenerateReport">
                        <span id="submitGenerateReportText">Generate Report</span>
                        <span id="submitGenerateReportLoading" class="loading" style="display: none;"></span>
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Email Report Modal -->
    <div class="modal" id="emailReportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Email Report</h2>
                <button class="close-modal" id="closeEmailModal">&times;</button>
            </div>
            <form id="emailReportForm">
                <div class="form-group">
                    <label for="emailRecipients">Recipients</label>
                    <input type="text" id="emailRecipients" placeholder="Enter email addresses (comma separated)" required>
                </div>
                
                <div class="form-group">
                    <label for="emailSubject">Subject</label>
                    <input type="text" id="emailSubject" value="Your Investment Report from Infinity Funds" required>
                </div>
                
                <div class="form-group">
                    <label for="emailMessage">Message</label>
                    <textarea id="emailMessage" rows="4" required>Please find attached your investment report. This report contains important information about your portfolio performance, holdings, and tax implications.

Best regards,
Infinity Funds Team</textarea>
                </div>
                
                <div class="form-group">
                    <label for="emailFormat">Attachment Format</label>
                    <select id="emailFormat">
                        <option value="pdf">PDF</option>
                        <option value="excel">Excel</option>
                        <option value="both">Both PDF & Excel</option>
                    </select>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" id="cancelEmailReport">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="submitEmailReport">
                        <span id="submitEmailReportText">Send Email</span>
                        <span id="submitEmailReportLoading" class="loading" style="display: none;"></span>
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <div class="reports-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <img src="assets/images/company/logo-icon.png" alt="Infinity Mutual Funds" class="logo-image" 
                     onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>∞</text></svg>'">
                <span class="brand-name">Infinity Funds</span>
            </div>
            
            <div class="user-profile">
                <img src="assets/images/users/default-avatar.png" alt="User" class="user-avatar" id="reportsUserAvatar"
                     onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2240%22 fill=%22%23667eea%22/><text x=%2250%22 y=%2255%22 text-anchor=%22middle%22 dy=%22.3em%22 font-size=%2230%22 fill=%22white%22 id=%22avatarText%22></text></svg>'">
                <h3 class="user-name" id="reportsUserName">Demo User</h3>
                <p class="user-email" id="reportsUserEmail">demo@infinityfunds.com</p>
                <span class="user-plan" id="reportsUserPlan">Premium</span>
            </div>
            
            <nav class="nav-menu">
                <a href="dashboard.html" class="nav-link">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </a>
                <a href="portfolio.html" class="nav-link">
                    <i class="fas fa-briefcase"></i>
                    <span>Portfolio</span>
                </a>
                <a href="transactions.html" class="nav-link">
                    <i class="fas fa-exchange-alt"></i>
                    <span>Transactions</span>
                </a>
                <a href="analytics.html" class="nav-link">
                    <i class="fas fa-chart-pie"></i>
                    <span>Analytics</span>
                </a>
                <a href="goals.html" class="nav-link">
                    <i class="fas fa-bullseye"></i>
                    <span>Financial Goals</span>
                </a>
                <a href="sip.html" class="nav-link">
                    <i class="fas fa-calendar-alt"></i>
                    <span>SIP Planner</span>
                </a>
                <a href="tax.html" class="nav-link">
                    <i class="fas fa-file-invoice-dollar"></i>
                    <span>Tax Center</span>
                </a>
                <a href="#" class="nav-link active">
                    <i class="fas fa-file-alt"></i>
                    <span>Reports</span>
                </a>
                <a href="settings.html" class="nav-link">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </nav>
            
            <div class="sidebar-footer">
                <a href="#" class="logout-btn" id="sidebarLogout">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Sign Out</span>
                </a>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <div class="welcome-message">
                    <h1>Reports & Statements</h1>
                    <p>Generate detailed reports and statements for your investments</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" id="printReportBtn">
                        <i class="fas fa-print"></i>
                        <span>Print</span>
                    </button>
                    <button class="btn btn-primary" id="generateReportBtn">
                        <i class="fas fa-file-download"></i>
                        <span>Generate Report</span>
                    </button>
                </div>
            </header>
            
            <!-- Date Range Selector -->
            <div class="date-range-container">
                <div class="date-range-card">
                    <div class="date-range-header">
                        <h3>Select Date Range for Reports</h3>
                        <button class="btn btn-secondary" id="applyDateRange">
                            <i class="fas fa-sync-alt"></i>
                            <span>Apply</span>
                        </button>
                    </div>
                    <div class="date-range-input">
                        <i class="fas fa-calendar-alt" style="color: #cbd5e1;"></i>
                        <input type="text" id="reportDateRange" value="Last 30 Days">
                    </div>
                </div>
            </div>
            
            <!-- Report Types -->
            <div class="report-types">
                <!-- Portfolio Statement -->
                <div class="report-card portfolio">
                    <div class="report-icon">
                        <i class="fas fa-briefcase"></i>
                    </div>
                    <h3>Portfolio Statement</h3>
                    <p>Comprehensive overview of your investment portfolio including holdings, values, and allocation.</p>
                    <div class="report-features">
                        <div class="report-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Current portfolio value</span>
                        </div>
                        <div class="report-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Asset allocation breakdown</span>
                        </div>
                        <div class="report-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Fund-wise performance</span>
                        </div>
                    </div>
                    <div class="report-actions">
                        <button class="report-btn primary" data-report="portfolio">
                            <i class="fas fa-eye"></i>
                            <span>Preview</span>
                        </button>
                        <button class="report-btn secondary" data-report="portfolio" data-action="generate">
                            <i class="fas fa-download"></i>
                            <span>Download</span>
                        </button>
                    </div>
                </div>
                
                <!-- Tax Report -->
                <div class="report-card tax">
                    <div class="report-icon">
                        <i class="fas fa-file-invoice-dollar"></i>
                    </div>
                    <h3>Tax Report</h3>
                    <p>Detailed tax calculations including capital gains, dividend income, and 80C deductions.</p>
                    <div class="report-features">
                        <div class="report-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Capital gains statement</span>
                        </div>
                        <div class="report-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Dividend income report</span>
                        </div>
                        <div class="report-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Section 80C tracker</span>
                        </div>
                    </div>
                    <div class="report-actions">
                        <button class="report-btn primary" data-report="tax">
                            <i class="fas fa-eye"></i>
                            <span>Preview</span>
                        </button>
                        <button class="report-btn secondary" data-report="tax" data-action="generate">
                            <i class="fas fa-download"></i>
                            <span>Download</span>
                        </button>
                    </div>
                </div>
                
                <!-- Performance Report -->
                <div class="report-card performance">
                    <div class="report-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3>Performance Report</h3>
                    <p>Analyze your portfolio performance with metrics like CAGR, XIRR, and benchmark comparison.</p>
                    <div class="report-features">
                        <div class="report-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>XIRR calculations</span>
                        </div>
                        <div class="report-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Benchmark comparison</span>
                        </div>
                        <div class="report-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Risk-adjusted returns</span>
                        </div>
                    </div>
                    <div class="report-actions">
                        <button class="report-btn primary" data-report="performance">
                            <i class="fas fa-eye"></i>
                            <span>Preview</span>
                        </button>
                        <button class="report-btn secondary" data-report="performance" data-action="generate">
                            <i class="fas fa-download"></i>
                            <span>Download</span>
                        </button>
                    </div>
                </div>
                
                <!-- Transaction History -->
                <div class="report-card transactions">
                    <div class="report-icon">
                        <i class="fas fa-exchange-alt"></i>
                    </div>
                    <h3>Transaction History</h3>
                    <p>Complete record of all your investment transactions including SIPs, lumpsums, and redemptions.</p>
                    <div class="report-features">
                        <div class="report-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>All transaction details</span>
                        </div>
                        <div class="report-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>SIP schedule</span>
                        </div>
                        <div class="report-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Redemption history</span>
                        </div>
                    </div>
                    <div class="report-actions">
                        <button class="report-btn primary" data-report="transactions">
                            <i class="fas fa-eye"></i>
                            <span>Preview</span>
                        </button>
                        <button class="report-btn secondary" data-report="transactions" data-action="generate">
                            <i class="fas fa-download"></i>
                            <span>Download</span>
                        </button>
                    </div>
                </div>
                
                <!-- Portfolio Analytics -->
                <div class="report-card analytics premium">
                    <div class="report-icon">
                        <i class="fas fa-chart-pie"></i>
                    </div>
                    <h3>Portfolio Analytics</h3>
                    <p>Advanced analytics including risk metrics, sector analysis, and portfolio optimization suggestions.</p>
                    <div class="report-features">
                        <div class="report-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Risk metrics (Sharpe, Beta)</span>
                        </div>
                        <div class="report-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Sector exposure analysis</span>
                        </div>
                        <div class="report-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Optimization suggestions</span>
                        </div>
                    </div>
                    <div class="report-actions">
                        <button class="report-btn primary" data-report="analytics">
                            <i class="fas fa-eye"></i>
                            <span>Preview</span>
                        </button>
                        <button class="report-btn secondary" data-report="analytics" data-action="generate">
                            <i class="fas fa-download"></i>
                            <span>Download</span>
                        </button>
                    </div>
                </div>
                
                <!-- Compliance Report -->
                <div class="report-card compliance premium">
                    <div class="report-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>Compliance Report</h3>
                    <p>Regulatory compliance reports including KYC status, investment limits, and audit trail.</p>
                    <div class="report-features">
                        <div class="report-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>KYC compliance status</span>
                        </div>
                        <div class="report-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Investment limit tracking</span>
                        </div>
                        <div class="report-feature">
                            <i class="fas fa-check-circle"></i>
                            <span>Audit trail</span>
                        </div>
                    </div>
                    <div class="report-actions">
                        <button class="report-btn primary" data-report="compliance">
                            <i class="fas fa-eye"></i>
                            <span>Preview</span>
                        </button>
                        <button class="report-btn secondary" data-report="compliance" data-action="generate">
                            <i class="fas fa-download"></i>
                            <span>Download</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Recently Generated Reports -->
            <div class="generated-reports">
                <div class="section-header">
                    <h2>Recently Generated Reports</h2>
                    <button class="btn btn-secondary" id="refreshReportsBtn">
                        <i class="fas fa-sync-alt"></i>
                        <span>Refresh</span>
                    </button>
                </div>
                
                <div class="reports-list">
                    <div class="report-item">
                        <div class="report-info">
                            <div class="report-icon-small" style="background: rgba(102, 126, 234, 0.2); color: #667eea;">
                                <i class="fas fa-briefcase"></i>
                            </div>
                            <div class="report-details">
                                <h4>Portfolio Statement - Q4 2023</h4>
                                <p>Generated on: Dec 31, 2023 • Period: Oct 1 - Dec 31, 2023</p>
                                <span class="report-size">PDF • 2.4 MB</span>
                            </div>
                        </div>
                        <div class="report-actions-small">
                            <button class="action-btn download" data-report="1">
                                <i class="fas fa-download"></i>
                            </button>
                            <button class="action-btn" data-report="1" data-action="email">
                                <i class="fas fa-envelope"></i>
                            </button>
                            <button class="action-btn delete" data-report="1">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="report-item">
                        <div class="report-info">
                            <div class="report-icon-small" style="background: rgba(239, 68, 68, 0.2); color: #ef4444;">
                                <i class="fas fa-file-invoice-dollar"></i>
                            </div>
                            <div class="report-details">
                                <h4>Tax Report - FY 2023-24</h4>
                                <p>Generated on: Mar 25, 2024 • Period: Apr 1, 2023 - Mar 31, 2024</p>
                                <span class="report-size">Excel • 1.8 MB</span>
                            </div>
                        </div>
                        <div class="report-actions-small">
                            <button class="action-btn download" data-report="2">
                                <i class="fas fa-download"></i>
                            </button>
                            <button class="action-btn" data-report="2" data-action="email">
                                <i class="fas fa-envelope"></i>
                            </button>
                            <button class="action-btn delete" data-report="2">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="report-item">
                        <div class="report-info">
                            <div class="report-icon-small" style="background: rgba(16, 185, 129, 0.2); color: #10b981;">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="report-details">
                                <h4>Annual Performance Report 2023</h4>
                                <p>Generated on: Jan 15, 2024 • Period: Jan 1 - Dec 31, 2023</p>
                                <span class="report-size">PDF • 3.1 MB</span>
                            </div>
                        </div>
                        <div class="report-actions-small">
                            <button class="action-btn download" data-report="3">
                                <i class="fas fa-download"></i>
                            </button>
                            <button class="action-btn" data-report="3" data-action="email">
                                <i class="fas fa-envelope"></i>
                            </button>
                            <button class="action-btn delete" data-report="3">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Report Preview -->
            <div class="report-preview-section">
                <div class="section-header">
                    <h2>Report Preview</h2>
                    <div class="preview-actions">
                        <button class="btn btn-secondary" id="emailReportBtn">
                            <i class="fas fa-envelope"></i>
                            <span>Email Report</span>
                        </button>
                        <button class="btn btn-success" id="downloadReportBtn">
                            <i class="fas fa-download"></i>
                            <span>Download</span>
                        </button>
                    </div>
                </div>
                
                <div class="preview-container">
                    <div class="preview-header">
                        <h3 id="previewTitle">Portfolio Statement</h3>
                        <span style="color: #cbd5e1; font-size: 0.9rem;" id="previewDate">As of December 31, 2023</span>
                    </div>
                    
                    <div class="preview-content" id="reportPreview">
                        <!-- Report preview will be loaded here -->
                        <div class="report-title">
                            <h2>PORTFOLIO STATEMENT</h2>
                            <p>Infinity Mutual Funds Investment Report</p>
                        </div>
                        
                        <div class="report-meta">
                            <div>
                                <strong>Investor:</strong> Demo User
                            </div>
                            <div>
                                <strong>Portfolio ID:</strong> INF-2023-001
                            </div>
                            <div>
                                <strong>Date Range:</strong> Oct 1, 2023 - Dec 31, 2023
                            </div>
                        </div>
                        
                        <div class="report-section">
                            <h4>Executive Summary</h4>
                            <div class="summary-grid">
                                <div class="summary-item">
                                    <div class="summary-label">Total Portfolio Value</div>
                                    <div class="summary-value">₹24.78L</div>
                                </div>
                                <div class="summary-item">
                                    <div class="summary-label">Total Returns</div>
                                    <div class="summary-value positive">+15.8%</div>
                                </div>
                                <div class="summary-item">
                                    <div class="summary-label">Total Invested</div>
                                    <div class="summary-value">₹21.66L</div>
                                </div>
                                <div class="summary-item">
                                    <div class="summary-label">Number of Funds</div>
                                    <div class="summary-value">8</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="report-section">
                            <h4>Portfolio Performance</h4>
                            <p>Your portfolio has delivered strong performance with an annualized return of 15.8% over the last year, outperforming the benchmark index by 3.2%.</p>
                            <p>Key highlights:</p>
                            <ul style="color: #cbd5e1; margin-left: 20px;">
                                <li>Equity funds contributed 12.4% to overall returns</li>
                                <li>Debt funds provided stable income of 2.45%</li>
                                <li>International exposure added 0.8% to returns</li>
                                <li>Gold allocation served as effective hedge</li>
                            </ul>
                        </div>
                        
                        <div class="report-section">
                            <h4>Asset Allocation</h4>
                            <p>Your portfolio is well-diversified across asset classes:</p>
                            <ul style="color: #cbd5e1; margin-left: 20px;">
                                <li><strong>Equity:</strong> 85% (Large Cap: 35%, Mid & Small Cap: 40%)</li>
                                <li><strong>Debt:</strong> 15% (Corporate Bonds: 10%, Government Bonds: 5%)</li>
                                <li><strong>Other:</strong> 5% (Gold: 3%, International: 2%)</li>
                            </ul>
                        </div>
                        
                        <div class="report-section">
                            <h4>Top Performing Funds</h4>
                            <ol style="color: #cbd5e1; margin-left: 20px;">
                                <li><strong>Mirae Asset Emerging Bluechip:</strong> +17.6% returns</li>
                                <li><strong>Kotak Equity Opportunities:</strong> +16.2% returns</li>
                                <li><strong>Axis Bluechip Fund:</strong> +15.7% returns</li>
                            </ol>
                        </div>
                        
                        <div class="report-section">
                            <h4>Recommendations</h4>
                            <p>Based on your current portfolio analysis, we recommend:</p>
                            <ol style="color: #cbd5e1; margin-left: 20px;">
                                <li>Consider increasing allocation to mid-cap funds for higher growth potential</li>
                                <li>Rebalance portfolio to maintain 70:30 equity-debt ratio</li>
                                <li>Review underperforming funds in next quarter</li>
                                <li>Consider tax harvesting opportunities before March 31</li>
                            </ol>
                        </div>
                        
                        <div style="margin-top: 50px; padding-top: 20px; border-top: 1px solid #cbd5e1; font-size: 0.9rem; color: #94a3b8;">
                            <p><strong>Disclaimer:</strong> This report is for informational purposes only. Past performance is not indicative of future results. Investments in mutual funds are subject to market risks. Please read all scheme related documents carefully before investing.</p>
                            <p style="margin-top: 10px;">Generated by Infinity Mutual Funds Platform • Report ID: INF-RPT-20231231-001</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Footer -->
            <footer class="reports-footer">
                <p>Infinity Mutual Funds Reports • All reports are generated with 256-bit encryption</p>
                <p style="margin-top: 5px; font-size: 0.8rem; color: #94a3b8;">
                    <i class="fas fa-clock"></i> Reports are stored for 7 years • 
                    <i class="fas fa-shield-alt"></i> SEBI Registered Advisor
                </p>
            </footer>
        </main>
    </div>

    <script>
        // ===== REPORTS DATA =====
        const reportsData = {
            generatedReports: [
                {
                    id: 1,
                    name: 'Portfolio Statement - Q4 2023',
                    type: 'portfolio',
                    generatedDate: '2023-12-31',
                    period: 'Oct 1 - Dec 31, 2023',
                    size: '2.4 MB',
                    format: 'pdf',
                    icon: 'fas fa-briefcase',
                    color: '#667eea'
                },
                {
                    id: 2,
                    name: 'Tax Report - FY 2023-24',
                    type: 'tax',
                    generatedDate: '2024-03-25',
                    period: 'Apr 1, 2023 - Mar 31, 2024',
                    size: '1.8 MB',
                    format: 'excel',
                    icon: 'fas fa-file-invoice-dollar',
                    color: '#ef4444'
                },
                {
                    id: 3,
                    name: 'Annual Performance Report 2023',
                    type: 'performance',
                    generatedDate: '2024-01-15',
                    period: 'Jan 1 - Dec 31, 2023',
                    size: '3.1 MB',
                    format: 'pdf',
                    icon: 'fas fa-chart-line',
                    color: '#10b981'
                }
            ],
            
            reportTemplates: {
                portfolio: {
                    title: 'Portfolio Statement',
                    sections: ['Executive Summary', 'Portfolio Holdings', 'Asset Allocation', 'Performance Summary', 'Recommendations']
                },
                tax: {
                    title: 'Tax Report',
                    sections: ['Capital Gains Statement', 'Dividend Income', 'Section 80C Deductions', 'Tax Liability Summary', 'Filing Checklist']
                },
                performance: {
                    title: 'Performance Report',
                    sections: ['Return Analysis', 'Benchmark Comparison', 'Risk Metrics', 'Fund-wise Performance', 'Historical Performance']
                },
                transactions: {
                    title: 'Transaction History',
                    sections: ['Transaction Summary', 'SIP Schedule', 'Redemption History', 'Dividend Records', 'Consolidated Statement']
                },
                analytics: {
                    title: 'Portfolio Analytics',
                    sections: ['Risk Analysis', 'Sector Exposure', 'Portfolio Optimization', 'Scenario Analysis', 'Stress Test Results']
                },
                compliance: {
                    title: 'Compliance Report',
                    sections: ['KYC Status', 'Investment Limits', 'Regulatory Compliance', 'Audit Trail', 'Document Checklist']
                }
            }
        };

        // ===== REPORTS INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Reports page loaded - Initializing...');
            
            // DOM Elements
            const sidebar = document.getElementById('sidebar');
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const notification = document.getElementById('notification');
            const notificationMessage = document.getElementById('notificationMessage');
            const sidebarLogout = document.getElementById('sidebarLogout');
            const generateReportBtn = document.getElementById('generateReportBtn');
            const printReportBtn = document.getElementById('printReportBtn');
            const emailReportBtn = document.getElementById('emailReportBtn');
            const downloadReportBtn = document.getElementById('downloadReportBtn');
            const refreshReportsBtn = document.getElementById('refreshReportsBtn');
            const applyDateRange = document.getElementById('applyDateRange');
            const reportsUserName = document.getElementById('reportsUserName');
            const reportsUserEmail = document.getElementById('reportsUserEmail');
            const avatarText = document.getElementById('avatarText');
            const reportsUserPlan = document.getElementById('reportsUserPlan');
            
            // Modal Elements
            const generateReportModal = document.getElementById('generateReportModal');
            const emailReportModal = document.getElementById('emailReportModal');
            const closeGenerateModal = document.getElementById('closeGenerateModal');
            const closeEmailModal = document.getElementById('closeEmailModal');
            const cancelGenerateReport = document.getElementById('cancelGenerateReport');
            const cancelEmailReport = document.getElementById('cancelEmailReport');
            const generateReportForm = document.getElementById('generateReportForm');
            const emailReportForm = document.getElementById('emailReportForm');
            
            // Current state
            let currentReportType = 'portfolio';
            let currentDateRange = 'Last 30 Days';
            
            // ===== USER AUTHENTICATION CHECK =====
            function checkAuth() {
                try {
                    const userData = localStorage.getItem('infinity_user');
                    if (!userData) {
                        showNotification('Please login to access reports', 'warning');
                        setTimeout(() => {
                            window.location.href = 'index.html';
                        }, 2000);
                        return null;
                    }
                    
                    const user = JSON.parse(userData);
                    
                    if (reportsUserName) {
                        reportsUserName.textContent = user.name;
                    }
                    
                    if (reportsUserEmail) {
                        reportsUserEmail.textContent = user.email;
                    }
                    
                    if (avatarText) {
                        const initials = user.name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
                        avatarText.textContent = initials;
                    }
                    
                    if (reportsUserPlan) {
                        reportsUserPlan.textContent = user.plan || 'Premium';
                    }
                    
                    return user;
                } catch (error) {
                    console.error('Auth check error:', error);
                    return null;
                }
            }
            
            const currentUser = checkAuth();
            
            // ===== INITIALIZE REPORTS =====
            function initReports() {
                // Initialize date range picker
                initDateRangePicker();
                
                // Initialize event listeners
                initEventListeners();
                
                // Load report preview
                loadReportPreview('portfolio');
                
                // Update UI for premium features
                updatePremiumFeatures();
            }
            
            // ===== INITIALIZE DATE RANGE PICKER =====
            function initDateRangePicker() {
                // Main date range picker
                $('#reportDateRange').daterangepicker({
                    opens: 'left',
                    startDate: moment().subtract(29, 'days'),
                    endDate: moment(),
                    ranges: {
                        'Today': [moment(), moment()],
                        'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                        'Last 7 Days': [moment().subtract(6, 'days'), moment()],
                        'Last 30 Days': [moment().subtract(29, 'days'), moment()],
                        'This Month': [moment().startOf('month'), moment().endOf('month')],
                        'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')],
                        'Last 3 Months': [moment().subtract(2, 'month').startOf('month'), moment().endOf('month')],
                        'Last 6 Months': [moment().subtract(5, 'month').startOf('month'), moment().endOf('month')],
                        'This Year': [moment().startOf('year'), moment().endOf('year')],
                        'Last Year': [moment().subtract(1, 'year').startOf('year'), moment().subtract(1, 'year').endOf('year')]
                    }
                }, function(start, end, label) {
                    currentDateRange = start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY');
                });
                
                // Modal date range picker
                $('#reportDateRangeModal').daterangepicker({
                    opens: 'left',
                    startDate: moment().subtract(29, 'days'),
                    endDate: moment(),
                    ranges: {
                        'Today': [moment(), moment()],
                        'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                        'Last 7 Days': [moment().subtract(6, 'days'), moment()],
                        'Last 30 Days': [moment().subtract(29, 'days'), moment()],
                        'This Month': [moment().startOf('month'), moment().endOf('month')],
                        'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')],
                        'Last 3 Months': [moment().subtract(2, 'month').startOf('month'), moment().endOf('month')],
                        'Last 6 Months': [moment().subtract(5, 'month').startOf('month'), moment().endOf('month')],
                        'This Year': [moment().startOf('year'), moment().endOf('year')],
                        'Last Year': [moment().subtract(1, 'year').startOf('year'), moment().subtract(1, 'year').endOf('year')]
                    }
                });
            }
            
            // ===== LOAD REPORT PREVIEW =====
            function loadReportPreview(reportType) {
                const previewTitle = document.getElementById('previewTitle');
                const previewDate = document.getElementById('previewDate');
                const reportPreview = document.getElementById('reportPreview');
                
                if (!previewTitle || !previewDate || !reportPreview) return;
                
                currentReportType = reportType;
                const template = reportsData.reportTemplates[reportType];
                
                if (!template) return;
                
                // Update preview title
                previewTitle.textContent = template.title;
                previewDate.textContent = `As of ${moment().format('MMMM D, YYYY')}`;
                
                // Generate preview content based on report type
                let previewContent = '';
                
                switch(reportType) {
                    case 'portfolio':
                        previewContent = generatePortfolioPreview();
                        break;
                    case 'tax':
                        previewContent = generateTaxPreview();
                        break;
                    case 'performance':
                        previewContent = generatePerformancePreview();
                        break;
                    case 'transactions':
                        previewContent = generateTransactionsPreview();
                        break;
                    case 'analytics':
                        previewContent = generateAnalyticsPreview();
                        break;
                    case 'compliance':
                        previewContent = generateCompliancePreview();
                        break;
                }
                
                reportPreview.innerHTML = previewContent;
            }
            
            // ===== GENERATE REPORT PREVIEWS =====
            function generatePortfolioPreview() {
                return `
                    <div class="report-title">
                        <h2>PORTFOLIO STATEMENT</h2>
                        <p>Infinity Mutual Funds Investment Report</p>
                    </div>
                    
                    <div class="report-meta">
                        <div>
                            <strong>Investor:</strong> ${currentUser?.name || 'Demo User'}
                        </div>
                        <div>
                            <strong>Portfolio ID:</strong> INF-${moment().format('YYYY')}-001
                        </div>
                        <div>
                            <strong>Date Range:</strong> ${currentDateRange}
                        </div>
                    </div>
                    
                    <div class="report-section">
                        <h4>Executive Summary</h4>
                        <div class="summary-grid">
                            <div class="summary-item">
                                <div class="summary-label">Total Portfolio Value</div>
                                <div class="summary-value">₹24.78L</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Total Returns</div>
                                <div class="summary-value positive">+15.8%</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Total Invested</div>
                                <div class="summary-value">₹21.66L</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Number of Funds</div>
                                <div class="summary-value">8</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="report-section">
                        <h4>Portfolio Performance</h4>
                        <p>Your portfolio has delivered strong performance with an annualized return of 15.8% over the last year, outperforming the benchmark index by 3.2%.</p>
                        <p>Key highlights:</p>
                        <ul style="color: #cbd5e1; margin-left: 20px;">
                            <li>Equity funds contributed 12.4% to overall returns</li>
                            <li>Debt funds provided stable income of 2.45%</li>
                            <li>International exposure added 0.8% to returns</li>
                            <li>Gold allocation served as effective hedge</li>
                        </ul>
                    </div>
                    
                    <div class="report-section">
                        <h4>Asset Allocation</h4>
                        <p>Your portfolio is well-diversified across asset classes:</p>
                        <ul style="color: #cbd5e1; margin-left: 20px;">
                            <li><strong>Equity:</strong> 85% (Large Cap: 35%, Mid & Small Cap: 40%)</li>
                            <li><strong>Debt:</strong> 15% (Corporate Bonds: 10%, Government Bonds: 5%)</li>
                            <li><strong>Other:</strong> 5% (Gold: 3%, International: 2%)</li>
                        </ul>
                    </div>
                    
                    <div class="report-section">
                        <h4>Top Performing Funds</h4>
                        <ol style="color: #cbd5e1; margin-left: 20px;">
                            <li><strong>Mirae Asset Emerging Bluechip:</strong> +17.6% returns</li>
                            <li><strong>Kotak Equity Opportunities:</strong> +16.2% returns</li>
                            <li><strong>Axis Bluechip Fund:</strong> +15.7% returns</li>
                        </ol>
                    </div>
                    
                    <div class="report-section">
                        <h4>Recommendations</h4>
                        <p>Based on your current portfolio analysis, we recommend:</p>
                        <ol style="color: #cbd5e1; margin-left: 20px;">
                            <li>Consider increasing allocation to mid-cap funds for higher growth potential</li>
                            <li>Rebalance portfolio to maintain 70:30 equity-debt ratio</li>
                            <li>Review underperforming funds in next quarter</li>
                            <li>Consider tax harvesting opportunities before March 31</li>
                        </ol>
                    </div>
                    
                    <div style="margin-top: 50px; padding-top: 20px; border-top: 1px solid #cbd5e1; font-size: 0.9rem; color: #94a3b8;">
                        <p><strong>Disclaimer:</strong> This report is for informational purposes only. Past performance is not indicative of future results. Investments in mutual funds are subject to market risks. Please read all scheme related documents carefully before investing.</p>
                        <p style="margin-top: 10px;">Generated by Infinity Mutual Funds Platform • Report ID: INF-RPT-${moment().format('YYYYMMDD')}-001</p>
                    </div>
                `;
            }
            
            function generateTaxPreview() {
                return `
                    <div class="report-title">
                        <h2>TAX REPORT</h2>
                        <p>Financial Year ${moment().subtract(1, 'year').format('YYYY')}-${moment().format('YY')}</p>
                    </div>
                    
                    <div class="report-meta">
                        <div>
                            <strong>Investor:</strong> ${currentUser?.name || 'Demo User'}
                        </div>
                        <div>
                            <strong>PAN:</strong> ABCDE1234F
                        </div>
                        <div>
                            <strong>Assessment Year:</strong> ${moment().format('YYYY')}-${parseInt(moment().format('YYYY')) + 1}
                        </div>
                    </div>
                    
                    <div class="report-section">
                        <h4>Capital Gains Summary</h4>
                        <div class="summary-grid">
                            <div class="summary-item">
                                <div class="summary-label">Short Term Capital Gains</div>
                                <div class="summary-value">₹45,200</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Long Term Capital Gains</div>
                                <div class="summary-value">₹1,25,000</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Total Tax Liability</div>
                                <div class="summary-value">₹18,540</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Tax Already Paid</div>
                                <div class="summary-value">₹12,000</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="report-section">
                        <h4>Section 80C Deductions</h4>
                        <ul style="color: #cbd5e1; margin-left: 20px;">
                            <li><strong>ELSS Investments:</strong> ₹75,000 (Limit: ₹1,50,000)</li>
                            <li><strong>Life Insurance Premium:</strong> ₹25,000</li>
                            <li><strong>PPF Contribution:</strong> ₹50,000</li>
                            <li><strong>Total 80C Deductions:</strong> ₹1,50,000 ✓</li>
                        </ul>
                    </div>
                    
                    <div class="report-section">
                        <h4>Dividend Income</h4>
                        <p>Total dividend received during the financial year: <strong>₹8,450</strong></p>
                        <p>Tax deducted at source (TDS): <strong>₹845</strong> (10%)</p>
                    </div>
                    
                    <div class="report-section">
                        <h4>Tax Filing Checklist</h4>
                        <ol style="color: #cbd5e1; margin-left: 20px;">
                            <li>Form 16 from employer</li>
                            <li>Bank interest certificates</li>
                            <li>Capital gains statements (Form 26AS)</li>
                            <li>Dividend income details</li>
                            <li>Home loan interest certificate (if applicable)</li>
                            <li>Health insurance premium receipts</li>
                        </ol>
                    </div>
                    
                    <div style="margin-top: 50px; padding-top: 20px; border-top: 1px solid #cbd5e1; font-size: 0.9rem; color: #94a3b8;">
                        <p><strong>Disclaimer:</strong> This report is for informational purposes only. Please consult with a qualified tax advisor for accurate tax planning and filing. Tax laws are subject to change.</p>
                        <p style="margin-top: 10px;">Generated by Infinity Mutual Funds Platform • Tax Report ID: INF-TAX-${moment().format('YYYYMMDD')}</p>
                    </div>
                `;
            }
            
            function generatePerformancePreview() {
                return `
                    <div class="report-title">
                        <h2>PERFORMANCE REPORT</h2>
                        <p>Investment Performance Analysis</p>
                    </div>
                    
                    <div class="report-meta">
                        <div>
                            <strong>Investor:</strong> ${currentUser?.name || 'Demo User'}
                        </div>
                        <div>
                            <strong>Report Period:</strong> ${currentDateRange}
                        </div>
                        <div>
                            <strong>Benchmark:</strong> Nifty 50 TRI
                        </div>
                    </div>
                    
                    <div class="report-section">
                        <h4>Key Performance Metrics</h4>
                        <div class="summary-grid">
                            <div class="summary-item">
                                <div class="summary-label">Portfolio Return (CAGR)</div>
                                <div class="summary-value positive">15.8%</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Benchmark Return</div>
                                <div class="summary-value">12.6%</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Excess Return (Alpha)</div>
                                <div class="summary-value positive">+3.2%</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Risk (Standard Deviation)</div>
                                <div class="summary-value">14.2%</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="report-section">
                        <h4>Risk-Adjusted Returns</h4>
                        <ul style="color: #cbd5e1; margin-left: 20px;">
                            <li><strong>Sharpe Ratio:</strong> 1.24 (Good: Above 1.0)</li>
                            <li><strong>Sortino Ratio:</strong> 1.85 (Good: Above 1.0)</li>
                            <li><strong>Beta:</strong> 0.85 (Less volatile than market)</li>
                            <li><strong>Maximum Drawdown:</strong> -8.2% (During market correction)</li>
                            <li><strong>Recovery Period:</strong> 45 days</li>
                        </ul>
                    </div>
                    
                    <div class="report-section">
                        <h4>Performance vs Benchmarks</h4>
                        <p>Your portfolio has consistently outperformed relevant benchmarks:</p>
                        <ul style="color: #cbd5e1; margin-left: 20px;">
                            <li>Outperformed Nifty 50 by 3.2%</li>
                            <li>Outperformed Nifty Next 50 by 1.8%</li>
                            <li>Outperformed Nifty Midcap 150 by 0.5%</li>
                            <li>Similar performance to focused equity funds category</li>
                        </ul>
                    </div>
                    
                    <div class="report-section">
                        <h4>Performance Attribution</h4>
                        <p>Top contributors to portfolio performance:</p>
                        <ol style="color: #cbd5e1; margin-left: 20px;">
                            <li><strong>Stock Selection:</strong> +4.2% (Excellent stock picking)</li>
                            <li><strong>Sector Allocation:</strong> +2.1% (Overweight in technology)</li>
                            <li><strong>Market Timing:</strong> +0.8% (Entry during corrections)</li>
                            <li><strong>Currency Impact:</strong> +0.4% (International funds)</li>
                        </ol>
                    </div>
                    
                    <div style="margin-top: 50px; padding-top: 20px; border-top: 1px solid #cbd5e1; font-size: 0.9rem; color: #94a3b8;">
                        <p><strong>Disclaimer:</strong> Past performance is not indicative of future results. Investment returns are subject to market risks. Performance metrics are calculated based on available data and assumptions.</p>
                        <p style="margin-top: 10px;">Generated by Infinity Mutual Funds Platform • Performance Report ID: INF-PERF-${moment().format('YYYYMMDD')}</p>
                    </div>
                `;
            }
            
            function generateTransactionsPreview() {
                return `
                    <div class="report-title">
                        <h2>TRANSACTION HISTORY</h2>
                        <p>Complete Investment Transaction Record</p>
                    </div>
                    
                    <div class="report-meta">
                        <div>
                            <strong>Investor:</strong> ${currentUser?.name || 'Demo User'}
                        </div>
                        <div>
                            <strong>Report Period:</strong> ${currentDateRange}
                        </div>
                        <div>
                            <strong>Total Transactions:</strong> 42
                        </div>
                    </div>
                    
                    <div class="report-section">
                        <h4>Transaction Summary</h4>
                        <div class="summary-grid">
                            <div class="summary-item">
                                <div class="summary-label">Total Investments</div>
                                <div class="summary-value">₹4,25,000</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Total Redemptions</div>
                                <div class="summary-value">₹1,20,000</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Active SIPs</div>
                                <div class="summary-value">5</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Dividend Received</div>
                                <div class="summary-value">₹8,450</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="report-section">
                        <h4>SIP Schedule</h4>
                        <p>Your active Systematic Investment Plans:</p>
                        <ul style="color: #cbd5e1; margin-left: 20px;">
                            <li><strong>Axis Bluechip Fund:</strong> ₹10,000 on 5th of every month</li>
                            <li><strong>Mirae Emerging Bluechip:</strong> ₹7,500 on 10th of every month</li>
                            <li><strong>SBI Small Cap Fund:</strong> ₹5,000 on 15th of every month</li>
                            <li><strong>ICICI Corporate Bond:</strong> ₹5,000 on 20th of every month</li>
                            <li><strong>Kotak Equity Opportunities:</strong> ₹7,500 on 25th of every month</li>
                        </ul>
                    </div>
                    
                    <div class="report-section">
                        <h4>Recent Transactions (Last 10)</h4>
                        <ul style="color: #cbd5e1; margin-left: 20px;">
                            <li>Jan 5, 2024: SIP - Axis Bluechip Fund - ₹10,000</li>
                            <li>Jan 10, 2024: SIP - Mirae Emerging Bluechip - ₹7,500</li>
                            <li>Jan 15, 2024: SIP - SBI Small Cap Fund - ₹5,000</li>
                            <li>Jan 20, 2024: SIP - ICICI Corporate Bond - ₹5,000</li>
                            <li>Jan 25, 2024: SIP - Kotak Equity Opportunities - ₹7,500</li>
                            <li>Jan 28, 2024: Dividend - HDFC Balanced Fund - ₹1,250</li>
                            <li>Feb 5, 2024: SIP - Axis Bluechip Fund - ₹10,000</li>
                            <li>Feb 10, 2024: Lumpsum - Nippon Gold ETF - ₹25,000</li>
                            <li>Feb 12, 2024: Redemption - Franklin US Fund - ₹45,000</li>
                            <li>Feb 15, 2024: SIP - SBI Small Cap Fund - ₹5,000</li>
                        </ul>
                    </div>
                    
                    <div style="margin-top: 50px; padding-top: 20px; border-top: 1px solid #cbd5e1; font-size: 0.9rem; color: #94a3b8;">
                        <p><strong>Disclaimer:</strong> This transaction history is generated from the data available in our system. Please verify with your actual bank statements and AMC statements. Report any discrepancies within 7 days.</p>
                        <p style="margin-top: 10px;">Generated by Infinity Mutual Funds Platform • Transaction Report ID: INF-TXN-${moment().format('YYYYMMDD')}</p>
                    </div>
                `;
            }
            
            function generateAnalyticsPreview() {
                return `
                    <div class="report-title">
                        <h2>PORTFOLIO ANALYTICS REPORT</h2>
                        <p>Advanced Portfolio Analysis & Insights</p>
                    </div>
                    
                    <div class="report-meta">
                        <div>
                            <strong>Investor:</strong> ${currentUser?.name || 'Demo User'}
                        </div>
                        <div>
                            <strong>Risk Profile:</strong> Moderately Aggressive
                        </div>
                        <div>
                            <strong>Analysis Date:</strong> ${moment().format('MMMM D, YYYY')}
                        </div>
                    </div>
                    
                    <div class="report-section">
                        <h4>Portfolio Health Score</h4>
                        <div class="summary-grid">
                            <div class="summary-item">
                                <div class="summary-label">Diversification Score</div>
                                <div class="summary-value positive">8.5/10</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Risk Management</div>
                                <div class="summary-value positive">7.8/10</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Cost Efficiency</div>
                                <div class="summary-value">6.2/10</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Overall Health</div>
                                <div class="summary-value positive">7.5/10</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="report-section">
                        <h4>Sector Exposure Analysis</h4>
                        <p>Your portfolio has the following sector exposure:</p>
                        <ul style="color: #cbd5e1; margin-left: 20px;">
                            <li><strong>Technology:</strong> 28% (Overweight by 8%)</li>
                            <li><strong>Financial Services:</strong> 22% (Appropriate)</li>
                            <li><strong>Consumer Goods:</strong> 15% (Underweight by 3%)</li>
                            <li><strong>Healthcare:</strong> 12% (Appropriate)</li>
                            <li><strong>Industrial:</strong> 10% (Underweight by 5%)</li>
                            <li><strong>Energy:</strong> 8% (Appropriate)</li>
                            <li><strong>Others:</strong> 5%</li>
                        </ul>
                    </div>
                    
                    <div class="report-section">
                        <h4>Portfolio Optimization Suggestions</h4>
                        <ol style="color: #cbd5e1; margin-left: 20px;">
                            <li><strong>Reduce Technology Overexposure:</strong> Consider trimming 5% from technology sector funds</li>
                            <li><strong>Increase Consumer Goods Exposure:</strong> Add 3% allocation to FMCG/consumer sector</li>
                            <li><strong>Rebalance Debt Allocation:</strong> Shift 2% from corporate bonds to government securities</li>
                            <li><strong>Cost Optimization:</strong> Replace high-expense ratio funds with similar lower-cost alternatives</li>
                            <li><strong>Tax Efficiency:</strong> Harvest losses in underperforming funds before year-end</li>
                        </ol>
                    </div>
                    
                    <div class="report-section">
                        <h4>Scenario Analysis</h4>
                        <p>Portfolio performance under different market scenarios:</p>
                        <ul style="color: #cbd5e1; margin-left: 20px;">
                            <li><strong>Bull Market (+20%):</strong> Expected return: +18.5%</li>
                            <li><strong>Normal Market (+10%):</strong> Expected return: +12.3%</li>
                            <li><strong>Bear Market (-20%):</strong> Expected loss: -15.2%</li>
                            <li><strong>Stress Test (2008-like crash):</strong> Maximum drawdown: -32%</li>
                        </ul>
                    </div>
                    
                    <div style="margin-top: 50px; padding-top: 20px; border-top: 1px solid #cbd5e1; font-size: 0.9rem; color: #94a3b8;">
                        <p><strong>Disclaimer:</strong> This analytics report is for informational purposes only. Portfolio optimization suggestions are based on mathematical models and historical data. Actual results may vary. Consult with a financial advisor before making investment decisions.</p>
                        <p style="margin-top: 10px;">Generated by Infinity Mutual Funds Platform • Analytics Report ID: INF-ANAL-${moment().format('YYYYMMDD')}</p>
                    </div>
                `;
            }
            
            function generateCompliancePreview() {
                return `
                    <div class="report-title">
                        <h2>COMPLIANCE REPORT</h2>
                        <p>Regulatory Compliance & Documentation Status</p>
                    </div>
                    
                    <div class="report-meta">
                        <div>
                            <strong>Investor:</strong> ${currentUser?.name || 'Demo User'}
                        </div>
                        <div>
                            <strong>KYC Status:</strong> Completed & Verified
                        </div>
                        <div>
                            <strong>Last Audit:</strong> ${moment().subtract(30, 'days').format('MMMM D, YYYY')}
                        </div>
                    </div>
                    
                    <div class="report-section">
                        <h4>Compliance Status Summary</h4>
                        <div class="summary-grid">
                            <div class="summary-item">
                                <div class="summary-label">KYC Compliance</div>
                                <div class="summary-value positive">✓ Complete</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Investment Limits</div>
                                <div class="summary-value positive">Within Limits</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Documentation</div>
                                <div class="summary-value positive">90% Complete</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-label">Regulatory Updates</div>
                                <div class="summary-value positive">Up to Date</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="report-section">
                        <h4>KYC Details</h4>
                        <ul style="color: #cbd5e1; margin-left: 20px;">
                            <li><strong>PAN:</strong> ABCDE1234F (Verified)</li>
                            <li><strong>Aadhaar:</strong> Linked & Verified</li>
                            <li><strong>Address Proof:</strong> Submitted & Verified</li>
                            <li><strong>Income Proof:</strong> Submitted & Verified</li>
                            <li><strong>KYC Last Updated:</strong> ${moment().subtract(6, 'months').format('MMMM D, YYYY')}</li>
                            <li><strong>Next KYC Review:</strong> ${moment().add(6, 'months').format('MMMM D, YYYY')}</li>
                        </ul>
                    </div>
                    
                    <div class="report-section">
                        <h4>Investment Limits & Restrictions</h4>
                        <p>Your current investments are within regulatory limits:</p>
                        <ul style="color: #cbd5e1; margin-left: 20px;">
                            <li><strong>Total Investment Value:</strong> ₹24.78L (No limits exceeded)</li>
                            <li><strong>Single Fund Exposure:</strong> Max 15% (Within 25% limit)</li>
                            <li><strong>Sector Concentration:</strong> Max 28% (Within 35% limit)</li>
                            <li><strong>Leverage/ Borrowing:</strong> None (Within limits)</li>
                            <li><strong>International Exposure:</strong> 2% (Within 10% limit)</li>
                        </ul>
                    </div>
                    
                    <div class="report-section">
                        <h4>Document Checklist</h4>
                        <ul style="color: #cbd5e1; margin-left: 20px;">
                            <li><strong>✓</strong> KYC Form with photograph</li>
                            <li><strong>✓</strong> PAN Card copy</li>
                            <li><strong>✓</strong> Address Proof (Aadhaar/Passport)</li>
                            <li><strong>✓</strong> Bank Account Details</li>
                            <li><strong>✓</strong> Nomination Form</li>
                            <li><strong>✗</strong> Latest Income Proof (Expired, needs renewal)</li>
                            <li><strong>✓</strong> FATCA Declaration</li>
                            <li><strong>✓</strong> Risk Profiling Questionnaire</li>
                        </ul>
                    </div>
                    
                    <div style="margin-top: 50px; padding-top: 20px; border-top: 1px solid #cbd5e1; font-size: 0.9rem; color: #94a3b8;">
                        <p><strong>Disclaimer:</strong> This compliance report is based on the information available in our system. It is your responsibility to ensure ongoing compliance with all applicable regulations. Regulatory requirements may change.</p>
                        <p style="margin-top: 10px;">Generated by Infinity Mutual Funds Platform • SEBI Registration No.: INZ000123456 • Compliance Report ID: INF-COMP-${moment().format('YYYYMMDD')}</p>
                    </div>
                `;
            }
            
            // ===== UPDATE PREMIUM FEATURES =====
            function updatePremiumFeatures() {
                const userPlan = currentUser?.plan || 'free';
                const isPremium = userPlan === 'premium' || userPlan === 'Premium';
                
                // Show/hide premium features
                document.querySelectorAll('.report-card.premium').forEach(card => {
                    if (!isPremium) {
                        card.style.opacity = '0.7';
                        card.style.cursor = 'not-allowed';
                        card.querySelector('.report-actions').innerHTML = `
                            <button class="report-btn primary" onclick="showNotification('Premium feature requires upgrade', 'warning')">
                                <i class="fas fa-lock"></i>
                                <span>Premium</span>
                            </button>
                            <button class="report-btn secondary" onclick="showNotification('Upgrade to access premium reports', 'info')">
                                <i class="fas fa-crown"></i>
                                <span>Upgrade</span>
                            </button>
                        `;
                    }
                });
            }
            
            // ===== EVENT LISTENERS =====
            function initEventListeners() {
                // Mobile menu toggle
                if (mobileMenuToggle) {
                    mobileMenuToggle.addEventListener('click', function() {
                        sidebar.classList.toggle('active');
                    });
                }
                
                // Close sidebar when clicking outside on mobile
                document.addEventListener('click', function(e) {
                    if (window.innerWidth <= 1024) {
                        if (!sidebar.contains(e.target) && !mobileMenuToggle.contains(e.target)) {
                            sidebar.classList.remove('active');
                        }
                    }
                });
                
                // Logout
                if (sidebarLogout) {
                    sidebarLogout.addEventListener('click', function(e) {
                        e.preventDefault();
                        if (confirm('Are you sure you want to sign out?')) {
                            localStorage.removeItem('infinity_user');
                            showNotification('Signed out successfully', 'success');
                            setTimeout(() => {
                                window.location.href = 'index.html';
                            }, 1500);
                        }
                    });
                }
                
                // Generate Report button
                if (generateReportBtn) {
                    generateReportBtn.addEventListener('click', function() {
                        openModal(generateReportModal);
                    });
                }
                
                // Print Report button
                if (printReportBtn) {
                    printReportBtn.addEventListener('click', function() {
                        window.print();
                        showNotification('Print dialog opened', 'info');
                    });
                }
                
                // Email Report button
                if (emailReportBtn) {
                    emailReportBtn.addEventListener('click', function() {
                        openModal(emailReportModal);
                    });
                }
                
                // Download Report button
                if (downloadReportBtn) {
                    downloadReportBtn.addEventListener('click', function() {
                        downloadReport(currentReportType);
                    });
                }
                
                // Refresh Reports button
                if (refreshReportsBtn) {
                    refreshReportsBtn.addEventListener('click', function() {
                        showNotification('Refreshing reports...', 'info');
                        // Simulate refresh
                        setTimeout(() => {
                            showNotification('Reports refreshed successfully', 'success');
                        }, 1500);
                    });
                }
                
                // Apply Date Range button
                if (applyDateRange) {
                    applyDateRange.addEventListener('click', function() {
                        showNotification(`Date range applied: ${currentDateRange}`, 'success');
                        // Update report preview with new date range
                        loadReportPreview(currentReportType);
                    });
                }
                
                // Modal close buttons
                if (closeGenerateModal) {
                    closeGenerateModal.addEventListener('click', function() {
                        closeModal(generateReportModal);
                    });
                }
                
                if (closeEmailModal) {
                    closeEmailModal.addEventListener('click', function() {
                        closeModal(emailReportModal);
                    });
                }
                
                if (cancelGenerateReport) {
                    cancelGenerateReport.addEventListener('click', function() {
                        closeModal(generateReportModal);
                    });
                }
                
                if (cancelEmailReport) {
                    cancelEmailReport.addEventListener('click', function() {
                        closeModal(emailReportModal);
                    });
                }
                
                // Close modals when clicking outside
                window.addEventListener('click', function(e) {
                    if (e.target === generateReportModal) {
                        closeModal(generateReportModal);
                    }
                    if (e.target === emailReportModal) {
                        closeModal(emailReportModal);
                    }
                });
                
                // Form submissions
                if (generateReportForm) {
                    generateReportForm.addEventListener('submit', function(e) {
                        e.preventDefault();
                        generateCustomReport();
                    });
                }
                
                if (emailReportForm) {
                    emailReportForm.addEventListener('submit', function(e) {
                        e.preventDefault();
                        sendEmailReport();
                    });
                }
                
                // Report card actions
                document.querySelectorAll('.report-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const reportType = this.closest('.report-card').classList[1];
                        const action = this.dataset.action;
                        
                        if (action === 'generate') {
                            downloadReport(reportType);
                        } else {
                            loadReportPreview(reportType);
                        }
                    });
                });
                
                // Generated reports actions
                document.querySelectorAll('.action-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const reportId = this.dataset.report;
                        const action = this.dataset.action;
                        
                        if (this.classList.contains('delete')) {
                            deleteReport(reportId);
                        } else if (action === 'email') {
                            openModal(emailReportModal);
                        } else {
                            downloadGeneratedReport(reportId);
                        }
                    });
                });
            }
            
            // ===== REPORT FUNCTIONS =====
            function generateCustomReport() {
                const submitBtn = document.getElementById('submitGenerateReport');
                const submitText = document.getElementById('submitGenerateReportText');
                const submitLoading = document.getElementById('submitGenerateReportLoading');
                
                // Show loading
                submitBtn.disabled = true;
                submitText.style.display = 'none';
                submitLoading.style.display = 'inline-block';
                
                // Simulate report generation
                setTimeout(() => {
                    const reportType = document.getElementById('reportType').value;
                    const format = document.getElementById('reportFormat').value;
                    
                    // Close modal
                    closeModal(generateReportModal);
                    
                    // Show success message
                    showNotification(`Report generated successfully! Downloading ${format.toUpperCase()} file...`, 'success');
                    
                    // Simulate download
                    setTimeout(() => {
                        showNotification('Report downloaded successfully!', 'success');
                    }, 2000);
                    
                    // Reset button
                    submitBtn.disabled = false;
                    submitText.style.display = 'inline';
                    submitLoading.style.display = 'none';
                    
                    // Reset form
                    generateReportForm.reset();
                }, 2000);
            }
            
            function downloadReport(reportType) {
                showNotification(`Downloading ${reportType} report...`, 'info');
                
                // Simulate download
                setTimeout(() => {
                    showNotification(`${reportType.charAt(0).toUpperCase() + reportType.slice(1)} report downloaded successfully!`, 'success');
                    
                    // Add to generated reports
                    const newReport = {
                        id: reportsData.generatedReports.length + 1,
                        name: `${reportsData.reportTemplates[reportType].title} - ${moment().format('MMM YYYY')}`,
                        type: reportType,
                        generatedDate: moment().format('YYYY-MM-DD'),
                        period: currentDateRange,
                        size: '2.1 MB',
                        format: 'pdf',
                        icon: reportsData.generatedReports[0].icon,
                        color: reportsData.generatedReports[0].color
                    };
                    
                    reportsData.generatedReports.unshift(newReport);
                    updateGeneratedReportsList();
                }, 1500);
            }
            
            function downloadGeneratedReport(reportId) {
                const report = reportsData.generatedReports.find(r => r.id == reportId);
                if (!report) return;
                
                showNotification(`Downloading ${report.name}...`, 'info');
                
                setTimeout(() => {
                    showNotification(`${report.name} downloaded successfully!`, 'success');
                }, 1500);
            }
            
            function deleteReport(reportId) {
                if (confirm('Are you sure you want to delete this report? This action cannot be undone.')) {
                    const index = reportsData.generatedReports.findIndex(r => r.id == reportId);
                    if (index !== -1) {
                        reportsData.generatedReports.splice(index, 1);
                        updateGeneratedReportsList();
                        showNotification('Report deleted successfully', 'success');
                    }
                }
            }
            
            function updateGeneratedReportsList() {
                // This would update the UI with the latest generated reports
                console.log('Generated reports updated:', reportsData.generatedReports);
            }
            
            function sendEmailReport() {
                const submitBtn = document.getElementById('submitEmailReport');
                const submitText = document.getElementById('submitEmailReportText');
                const submitLoading = document.getElementById('submitEmailReportLoading');
                
                // Show loading
                submitBtn.disabled = true;
                submitText.style.display = 'none';
                submitLoading.style.display = 'inline-block';
                
                const recipients = document.getElementById('emailRecipients').value;
                
                // Simulate email sending
                setTimeout(() => {
                    // Close modal
                    closeModal(emailReportModal);
                    
                    // Show success message
                    showNotification(`Report sent to ${recipients}`, 'success');
                    
                    // Reset button
                    submitBtn.disabled = false;
                    submitText.style.display = 'inline';
                    submitLoading.style.display = 'none';
                    
                    // Reset form
                    emailReportForm.reset();
                }, 2000);
            }
            
            // ===== MODAL FUNCTIONS =====
            function openModal(modal) {
                modal.classList.add('show');
                document.body.style.overflow = 'hidden';
            }
            
            function closeModal(modal) {
                modal.classList.remove('show');
                document.body.style.overflow = '';
            }
            
            // ===== UTILITY FUNCTIONS =====
            function showNotification(message, type = 'success') {
                if (!notification || !notificationMessage) return;
                
                notificationMessage.textContent = message;
                
                const colors = {
                    success: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                    warning: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',
                    error: 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',
                    info: 'linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)'
                };
                
                notification.style.background = colors[type] || colors.success;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 5000);
            }
            
            // ===== INITIALIZE REPORTS =====
            if (currentUser) {
                initReports();
            }
        });
    </script>
</body>
</html>